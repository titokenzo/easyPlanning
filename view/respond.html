<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- Meta, title, CSS, favicons, etc. -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="{$cfg.imgs}/favicon.ico" type="image/ico" />

<title>Easy Planning</title>

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<!-- NProgress -->
<link href="{$cfg.libcss}nprogress.css" rel="stylesheet">
<!-- Select2 -->
<link href="{$cfg.libcss}select2.min.css" rel="stylesheet">
<!-- Switchery -->
<link href="{$cfg.libcss}switchery.min.css" rel="stylesheet">
<!-- starrr -->
<link href="{$cfg.libcss}starrr.css" rel="stylesheet">
<!-- Custom Theme Style -->
<link href="{$cfg.css}custom.min.css" rel="stylesheet">
<style type="text/css">
.table .txt-small {
	width: 35px;
	heght: 40px;
	font-size: 15px;
	font-weight: bold;
	color: black;
	font-size: 15px;
}

.img-small {
	width: 30px;
}
.page-break{
	display: none;
}
</style >
<style type="text/css" media="print">
.tab-content > .tab-pane {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
}
.page-break{
	display: block;
	page-break-before: always !important;
}
.panel > .panel-collapse{
	display: block !important;
}
.nav .nav-tabs{
	display: none !importante;
}
table > tbody{
	display: block !important;
	page-break-inside: avoid !important;
}
</style>
</head>

<body class="login">
	<div class="nav_menu">
		<div>
			<a href="/" class="site_title"><img
				src="{$cfg.imgs}logoTR_32x32.png" /> <span
				style="color: midnightblue;">Easy Planning</span></a>
		</div>
	</div>

	<!-- page content -->
	<div style="width: 99.5%; min-width: 600px;">
		<div class="page-title">
			<div class="title_left" style="margin-left: 10px;">
				<h3>{if="isset($error)"}{$error}{else}{$obj.org_name}{/if}</h3>
			</div>
		</div>
		<div class="clearfix"></div>
		<div class="row" style="padding: 0 20px 0 20px;">
			<div class="col-md-12 col-sm-12 col-xs-12">
				<div class="x_panel">
					<div class="title_left">
						<h2>Diagnóstico Estratégico</h2>
						<div class="clearfix"></div>
					</div>
					<div class="x_content">
						{if="isset($error)"}
						<h2>{$error}</h2>
						{else}
						<div class="accordion" id="accordion" role="tablist"
							aria-multiselectable="true">
							<div class="panel">
								<a class="panel-heading collapsed" role="tab" id="headingOne"
									data-toggle="collapse" data-parent="#accordion" href="#step-11"
									aria-expanded="false" aria-controls="step-11">
									<h4 class="panel-title">[Apresentação]</h4>
								</a>
								<div id="step-11" class="panel-collapse collapse in"
									role="tabpanel" aria-labelledby="headingOne">
									<div class="panel-body">
										<p>
											Você responderá a questões que tratam de um processo de
											diagnóstico estratégico dos Ambientes Interno e Externo do(a)
											<b>{$obj.org_name}</b>.
										</p>
										<p>Trata-se de um momento de extrema importância por
											contemplar a geração de informações que serão utilizadas para
											alimentar o processo de tomada de decisão nos três níveis:
											estratégico, tático e operacional.</p>
										<p>Este questionário leva, em torno de, 30 minutos para
											ser concluído.</p>
									</div>
								</div>
							</div>
							<div class="panel">
								<a class="panel-heading collapsed" role="tab" id="headingTwo"
									data-toggle="collapse" data-parent="#accordion" href="#step-22"
									aria-expanded="false" aria-controls="step-22">
									<h4 class="panel-title">Ambiente Interno</h4>
								</a>
								<div id="step-22" class="panel-collapse collapse"
									role="tabpanel" aria-labelledby="headingTwo">
									<div class="panel-body">
										<div class="" role="tabpanel">
											<ul class="nav nav-tabs bar_tabs" role="tablist">
												<li role="presentation" class="active"><a
													href="#tab_contenthome_intern" id="home-tab" role="tab"
													data-toggle="tab" aria-expanded="true">[Instruções]</a></li>
												{loop="$pintern"}
												<li role="presentation" class=""><a
													href="#tab_content{$value.persp_id}" role="tab"
													data-toggle="tab" aria-expanded="false">{$value.persp_name}</a>
												</li> {/loop}
												<li role="presentation" class=""><a
													href="#tab_content_obs_int" role="tab" data-toggle="tab"
													aria-expanded="false">Observações</a></li>
											</ul>
											<div id="myTabContentIntern" class="tab-content">
												<div role="tabpanel" class="tab-pane fade active in"
													id="tab_contenthome_intern" aria-labelledby="home-tab">
													<p>
														Aqui serão levantadas questões referentes ao dignóstico
														estratégico do seu <b>Ambiente Interno</b>, o que
														significa dizer que estaremos gerando informações sobre a
														saúde interna da empresa.
													</p>
													<p>1. Utilize as abas para navegar entre as categorias.</p>
													<p>2. Você pode avançar ou retroceder quantas vezes
														achar necessário para rever suas respostas, mas
														recomendamos que o diagnóstico seja preenchido de forma
														sequencial.</p>
													<p>3. Escolha um dos seguintes conceitos: muito doente,
														doente, equilibrado, saudável, muito saudável, que indique
														o grau de saúde da empresa em relação a cada categoria
														neste exato momento.</p>
													<p>4. Quando concluir todas as abas, você deve avançar
														para as próximas etapas.</p>
												</div>
												{loop="$pintern"}
												<div class="page-break"></div>
												<div role="tabpanel" class="tab-pane fade"
													id="tab_content{$value.persp_id}"
													aria-labelledby="perspective-tab">
													<table class="table table-striped"
														style="width: auto !important;">
														<thead>
															<tr>
																<th>Questão</th>
																<th class="text-center txt-small"><img
																	src="{$cfg.imgs}cc.png" title="Não conheço"
																	class="img-small" /></th>
																<th class="text-center txt-small"><img
																	src="{$cfg.imgs}c1.png" title="1. Muito doente"
																	class="img-small" /></th>
																<th class="text-center txt-small"><img
																	src="{$cfg.imgs}c2.png" title="2. Doente"
																	class="img-small" /></th>
																<th class="text-center txt-small"><img
																	src="{$cfg.imgs}c3.png" title="3. Equilibrado"
																	class="img-small" /></th>
																<th class="text-center txt-small"><img
																	src="{$cfg.imgs}c4.png" title="4. Saudável"
																	class="img-small" /></th>
																<th class="text-center txt-small"><img
																	src="{$cfg.imgs}c5.png" title="5. Muito saudável"
																	class="img-small" /></th>
															</tr>
														</thead>
														<tbody>
															{loop="$intern"} {if="$value.persp_id==$value1.persp_id"}
															<tr class="text-center">
																<td class="text-left">{$value.quest_text}</td>
																<td><input type="radio" name="q{$value.quest_id}"
																	id="q-0-{$value.quest_id}" value="0"
																	{if="$value.res_grade=='0'"}checked{/if} /></td>
																<td><input type="radio" name="q{$value.quest_id}"
																	id="q-0-{$value.quest_id}" value="1"
																	{if="$value.res_grade==1"}checked{/if} /></td>
																<td><input type="radio" name="q{$value.quest_id}"
																	id="q-0-{$value.quest_id}" value="2"
																	{if="$value.res_grade==2"}checked{/if} /></td>
																<td><input type="radio" name="q{$value.quest_id}"
																	id="q-0-{$value.quest_id}" value="3"
																	{if="$value.res_grade==3"}checked{/if} /></td>
																<td><input type="radio" name="q{$value.quest_id}"
																	id="q-0-{$value.quest_id}" value="4"
																	{if="$value.res_grade==4"}checked{/if} /></td>
																<td><input type="radio" name="q{$value.quest_id}"
																	id="q-0-{$value.quest_id}" value="5"
																	{if="$value.res_grade==5"}checked{/if} /></td>
															</tr>
															{/if} {/loop}
														</tbody>
													</table>
												</div>
												{/loop}
												<div class="page-break"></div>
												<div role="tabpanel" class="tab-pane fade"
													id="tab_content_obs_int" aria-labelledby="perspective-tab">
													<form class="form-horizontal form-label-left">
														<p>
															Você agora tem a chance de registrar livremente outros <b>pontos fracos</b>
															e <b>ponstos fortes</b>, segundo sua percepção.
														</p>
														<p>
															1. Você gostaria de indicar outros <b>PONTOS FRACOS</b> da sua
															empresa?<br /> No campo abaixo, registre situações reais
															que existem dentro de sua empresa, portanto, sob seu
															absoluto controle, que considera <b>NEGATIVAS</b> e <b>RUINS</b>.<br/>
															Tais realidades incomodam profundamente, a ponto de não somente atrapalhar, 
															mas de comprometer e até inviabilizar o alcance dos objetivos e
															metas.<br/>Procure utilizar uma linguagem negativa, como por exemplo: 
															inexistência; excesso; falta; desequilíbrio; inconsistência; etc.
														</p>
														<div class="form-group">
															<div class="col-md-6 col-sm-6">
																<input type="text" required="required" class="form-control col-md-7 col-xs-12"
																 name="txt-1-0" id="txt-1-0" _child="tb_int_w">
															</div>
															<div>
																<img src="{$cfg.imgs}add.png" title="adicionar" _parent="txt-1-0" id="btnAdd_w" 
																name="btnAdd_w"	class="btn" />
															</div>
															<div class="clearfix"></div>
															<div class="col-md-6 col-sm-6">
																<table id="tb_int_w">
																	<tbody>
																	{loop="$responsesInputs"}{if="$value.input_type==1"}
																	<tr>
																		<td>{$value.input_text}</td>
																		<td><img src="{$cfg.imgs}rem.png" width="80%"
																			title="remover" class="btn" id="inp-0-{$value.input_id}" onClick="return remove(this);" /></td>
																	</tr>
																	{/if}{/loop}																	</tbody>
																</table>
															</div>
														</div>
														<p>
															2. Você gostaria de indicar outros <b>PONTOS FORTES</b>
															da sua empresa?<br /> No campo abaixo, registre
															situações que existem dentro de sua empresa, que
															considera <b>POSITIVAS</b> e <b>BOAS</b>.<br/>Tais qualidades 
															consquistadas estão à sua disposição, podendo ser adicionadas 
															para mudar um série de situações que precisam ser alteradas 
															para viabilizar o alcance dos objetivos e metas.<br/>
															Procure utiliza uma linguagem positiva, como por exemplo: 
															existência; controle equilibrado; racionalidade; consistência; etc.
														</p>
														<div class="form-group">
															<div class="col-md-6 col-sm-6">
																<input type="text" required="required" class="form-control col-md-7 col-xs-12"
																 name="txt-2-0" id="txt-2-0" _child="tb_int_f">
															</div>
															<div>
																<img src="{$cfg.imgs}add.png" title="adicionar" _parent="txt-2-0" id="btnAdd_f" 
																name="btnAdd_f"	class="btn" />
															</div>
															<div class="clearfix"></div>
															<div class="col-md-6 col-sm-6">
																<table id="tb_int_f">
																	<tbody>
																	{loop="$responsesInputs"}{if="$value.input_type==2"}
																	<tr>
																		<td>{$value.input_text}</td>
																		<td><img src="{$cfg.imgs}rem.png" width="80%"
																			title="remover" class="btn" id="inp-0-{$value.input_id}" onClick="return remove(this);" /></td>
																	</tr>
																	{/if}{/loop}																	</tbody>
																</table>
															</div>
														</div>

													</form>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="panel">
								<a class="panel-heading collapsed" role="tab" id="headingThree"
									data-toggle="collapse" data-parent="#accordion" href="#step-33"
									aria-expanded="false" aria-controls="step-33">
									<h4 class="panel-title">Ambiente Externo</h4>
								</a>
								<div id="step-33" class="panel-collapse collapse"
									role="tabpanel" aria-labelledby="headingThree">
									<div class="panel-body">
										<div class="" role="tabpanel">
											<ul class="nav nav-tabs bar_tabs" role="tablist">
												<li role="presentation" class="active"><a
													href="#tab_contenthome_extern" id="home-tab" role="tab"
													data-toggle="tab" aria-expanded="true">[Instruções]</a></li>
												{loop="$pextern"}
												<li role="presentation" class=""><a
													href="#tab_content{$value.persp_id}" role="tab"
													data-toggle="tab" aria-expanded="false">{$value.persp_name}</a>
												</li> {/loop}
												<li role="presentation" class=""><a
													href="#tab_content_obs_ext" role="tab" data-toggle="tab"
													aria-expanded="false">Observações</a></li>
											</ul>
											<div id="myTabContentExtern" class="tab-content">
												<div role="tabpanel" class="tab-pane fade active in"
													id="tab_contenthome_extern" aria-labelledby="home-tab">
													<p>
														Aqui serão levantadas questões referentes ao dignóstico
														estratégico do seu <b>Ambiente Externo</b>, o que
														significa dizer que estaremos gerando informações sobre a
														saúde externa da empresa.
													</p>
													<p>1. Utilize as abas para navegar entre as categorias.</p>
													<p>2. Você pode avançar ou retroceder quantas vezes
														achar necessário para rever suas respostas, mas
														recomendamos que o diagnóstico seja preenchido de forma
														sequencial.</p>
													<p>3. Escolha o conceito de 1 (mais baixo impacto) a
														5 (nível de mais alto impacto), que indique o grau de
														risco da empresa em relação a cada categoria neste exato
														momento.</p>
													<p>4. Nesta etapa cada questão deve ser avaliada pelas
														perspectivas de Ameaças (A) e Oportunidades (O).</p>
													<p>5. Quando concluir todas as questões, você poderá
														citar outras que não foram abordadas nas suas respostas.</p>
												</div>
												{loop="$pextern"}
												<div role="tabpanel" class="tab-pane fade"
													id="tab_content{$value.persp_id}"
													aria-labelledby="perspective-tab">
													<table class="table table-striped"
														style="width: auto !important;">
														<thead>
															<tr>
																<th>Questão</th>
																<th style="width: 50px"></th>
																<th class="text-center txt-small"><img
																	src="{$cfg.imgs}ne2.png" title="Não existe"
																	class="img-small" /></th>
																<th class="text-center txt-small"
																	style="background-color: OrangeRed;" title="mais baixo impacto">1</th>
																<th class="text-center txt-small"
																	style="background-color: Tomato;"title="pouco impacto"></div>2</th>
																<th class="text-center txt-small"
																	style="background-color: Coral;"title="impacto moderado">3</th>
																<th class="text-center txt-small"
																	style="background-color: Orange;"title="impacto considerável">4</th>
																<th class="text-center txt-small"
																	style="background-color: DarkOrange;" title="crítico">5</th>
															</tr>
														</thead>
														<tbody>
															{loop="$extern"} {if="$value.persp_id==$value1.persp_id"}
															<tr class="text-center">
																<td class="text-left" rowspan="2">{$value.quest_text}</td>
																<td
																	title="Avalie a questão pelo aspecto da AMEAÇA para a empresa">A</td>
																<td><input type="radio" name="a_{$value.quest_id}"
																	id="q-1-{$value.quest_id}" value="0"
																	{if="$value.res_grade=='0'"}checked{/if} /></td>
																<td><input type="radio" name="a_{$value.quest_id}"
																	id="q-1-{$value.quest_id}" value="1"
																	{if="$value.res_grade==1"}checked{/if} /></td>
																<td><input type="radio" name="a_{$value.quest_id}"
																	id="q-1-{$value.quest_id}" value="2"
																	{if="$value.res_grade==2"}checked{/if} /></td>
																<td><input type="radio" name="a_{$value.quest_id}"
																	id="q-1-{$value.quest_id}" value="3"
																	{if="$value.res_grade==3"}checked{/if} /></td>
																<td><input type="radio" name="a_{$value.quest_id}"
																	id="q-1-{$value.quest_id}" value="4"
																	{if="$value.res_grade==4"}checked{/if} /></td>
																<td><input type="radio" name="a_{$value.quest_id}"
																	id="q-1-{$value.quest_id}" value="5"
																	{if="$value.res_grade==5"}checked{/if} /></td>
															</tr>
															<tr class="text-center">
																<td
																	title="Avalie a questão como uma OPORTUNIDADE para a empresa">O</td>
																<td><input type="radio" name="o_{$value.quest_id}"
																	id="q-2-{$value.quest_id}" value="0"
																	{if="$value.res_grade2=='0'"}checked{/if} /></td>
																<td><input type="radio" name="o_{$value.quest_id}"
																	id="q-2-{$value.quest_id}" value="1"
																	{if="$value.res_grade2==1"}checked{/if} /></td>
																<td><input type="radio" name="o_{$value.quest_id}"
																	id="q-2-{$value.quest_id}" value="2"
																	{if="$value.res_grade2==2"}checked{/if} /></td>
																<td><input type="radio" name="o_{$value.quest_id}"
																	id="q-2-{$value.quest_id}" value="3"
																	{if="$value.res_grade2==3"}checked{/if} /></td>
																<td><input type="radio" name="o_{$value.quest_id}"
																	id="q-2-{$value.quest_id}" value="4"
																	{if="$value.res_grade2==4"}checked{/if} /></td>
																<td><input type="radio" name="o_{$value.quest_id}"
																	id="q-2-{$value.quest_id}" value="5"
																	{if="$value.res_grade2==5"}checked{/if} /></td>
															</tr>
															{/if} {/loop}
														</tbody>
													</table>
												</div>
												{/loop}
												<div role="tabpanel" class="tab-pane fade"
													id="tab_content_obs_ext" aria-labelledby="perspective-tab">
													<form class="form-horizontal form-label-left">
														<p>
															Você agora tem a chance de registrar livremente outras <b>ameaças</b>
															e <b>oportunidades</b>, segundo sua percepção.
														</p>
														<p>
															1. Você gostaria de indicar outras <b>AMEAÇAS</b> à sua
															empresa?<br /> No campo abaixo, registre situações reais
															que existem fora de sua empresa, portanto, fora do seu
															controle, que considera <b>AMEAÇADORAS</b>, e que podem
															comprometer e até inviabilizar o alcance dos objetivos e
															metas.
														</p>
														<div class="form-group">
															<div class="col-md-6 col-sm-6">
																<input type="text" required="required" class="form-control col-md-7 col-xs-12"
																 name="txt-3-0" id="txt-3-0" _child="tb_ext_a">
															</div>
															<div>
																<img src="{$cfg.imgs}add.png" title="adicionar" _parent="txt-3-0" id="btnAdd_a" 
																name="btnAdd_a"	class="btn" />
															</div>
															<div class="clearfix"></div>
															<div class="col-md-6 col-sm-6">
																<table id="tb_ext_a">
																	<tbody>
																	{loop="$responsesInputs"}{if="$value.input_type==3"}
																	<tr>
																		<td>{$value.input_text}</td>
																		<td><img src="{$cfg.imgs}rem.png" width="80%"
																			title="remover" class="btn" id="inp-0-{$value.input_id}" onClick="return remove(this);" /></td>
																	</tr>
																	{/if}{/loop}
																	</tbody>
																</table>
															</div>
														</div>

														<p>
															2. Você gostaria de indicar outras <b>OPORTUNIDADES</b>
															da sua empresa?<br /> No campo abaixo, registre
															situações reais que existem fora de sua empresa, que
															considera <b>OPORTUNIDADES</b>, que podem e devem ser
															aproveitadas para viabilizar ou facilitar o alcance dos
															objetivos e metas.
														</p>
														<div class="form-group">
															<div class="col-md-6 col-sm-6">
																<input type="text" required="required" class="form-control col-md-7 col-xs-12"
																 name="txt-4-0" id="txt-4-0" _child="tb_ext_o">
															</div>
															<div>
																<img src="{$cfg.imgs}add.png" title="adicionar" _parent="txt-4-0" id="btnAdd_o" 
																name="btnAdd_o"	class="btn" />
															</div>
															<div class="clearfix"></div>
															<div class="col-md-6 col-sm-6">
																<table id="tb_ext_o">
																	<tbody>
																	{loop="$responsesInputs"}{if="$value.input_type==4"}
																	<tr>
																		<td>{$value.input_text}</td>
																		<td><img src="{$cfg.imgs}rem.png" width="80%"
																			title="remover" class="btn" id="inp-0-{$value.input_id}" onClick="return remove(this);" /></td>
																	</tr>
																	{/if}{/loop}																	</tbody>
																</table>
															</div>
														</div>
														<table id="tabLoad_tpl" name="tabLoad_tpl" style="display:none" data-counter="0">
															<tr>
																<td>{txtInput}</td>
																<td><img src="{$cfg.imgs}rem.png" width="80%"
																	title="remover" class="btn" id="inp-0-{_code}" onClick="return remove(this);" /></td>
															</tr>
														</table>

													</form>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							{/if}
						</div>
					</div>
				</div>
				<!-- footer content -->
				<div class="pull-right">©2018 All Rights Reserved.
					TreinaRecife!</div>
				<!-- /footer content -->
			</div>
		</div>
	</div>

	<!-- jQuery -->
	<script src="{$cfg.libjs}jquery.min.js"></script>
	<!-- Bootstrap -->
	<script src="{$cfg.libjs}bootstrap.min.js"></script>
	<!-- FastClick -->
	<script src="{$cfg.libjs}fastclick.js"></script>
	<!-- jQuery Smart Wizard -->
	<script src="{$cfg.libjs}jquery.smartWizard.js"></script>
	<!-- Custom Theme Scripts -->
	<script src="/res/js/custom.min.js"></script>
	<script>
		//get respondent from Rain (session)
		var vresp = {$obj.resp_id};
		
		$("input[type='radio']").change(function() {
			sendUpdate($(this),'save');
		});
		
		function remove(obj){
			sendUpdate(obj,'remove');
			return false;			
		}
		
		$("img[name*='btnAdd_']").click(function() {
			var vpar = $(this).attr('_parent');
			var vinput = $('input[name="' + vpar + '"]');
			var vtxt = $(vinput).val().trim(); 
			if(vtxt=="")
				return false;
			sendUpdate(vinput,'input');
			return false;
		})
		
		function sendUpdate(obj,pAction) {
			var vcode = $(obj).attr("id").split('-');
			var vtype = vcode[1];
			var vquest = vcode[2];
			var vgrade = $(obj).val();
			$.ajax({
				url : '/respond/' + pAction,
				type : 'post',
				data : {
					resp : vresp,
					quest : vquest,
					type : vtype,
					grade : vgrade
				},
				dataType : 'json',
				success : function(ret) {
					if(pAction=="input"){
						updateScreen(obj,ret);
					}else if(pAction=="remove"){
						$(obj).closest("tr").remove();
					}
				},
				error : function(ret) {
					alert('Não foi possível atualizar os dados');
				}
			});
			return false;
		}
		
		function updateScreen(obj,pid){
			var vtxt = $(obj).val().trim(); 
			if(vtxt=="")
				return false;
			var vchild = '#' + $(obj).attr('_child'); 
			var vtable = $(vchild);
			var htmlCode = "<tr>" + $("#tabLoad_tpl").find("tr:first").html() + "</tr>";
			htmlCode = htmlCode.replace(/{_code}/g, pid);
			htmlCode = htmlCode.replace(/{txtInput}/g, vtxt);
			$(vtable).append(htmlCode);
			$(obj).val("");
		}
	</script>
</body>
</html>
